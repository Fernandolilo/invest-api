<div class="container mt-4">
  <div class="card p-3">  

  <div class="mb-5 custom-check .form-check-input">
     
<h5 class="d-flex align-items-center">
  Transações

  <div class="dropdown ms-2">
    <a 
      class="text-dark dropdown-toggle" 
      href="#" 
      role="button" 
      id="dropdownMenuButton" 
      data-bs-toggle="dropdown" 
      aria-expanded="false"
    >
      <i 
        class="bi bi-journal-text cartao-conteudo cartao" 
        style="cursor: pointer; font-size: 1.3rem;" 
        title="Transações"
      ></i>
    </a>

    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <li>
        <a class="dropdown-item" href="#" (click)="onNewInvest($event)">Investimentos</a>
      </li>
    </ul>
  </div>
</h5>


    <div class="d-flex align-items-center mb-3">
      <strong class="me-2">Dados da Conta:</strong>
      <!-- Ícone clicável para mostrar/ocultar dados da conta -->
      <i 
        class="bi"
        [ngClass]="mostrarDadosConta ? 'bi-eye-slash-fill' : 'bi-eye-fill'" 
        (click)="onVisualConta()" 
        style="cursor: pointer; font-size: 1.2rem;" 
        title="{{ mostrarDadosConta ? 'Ocultar dados da conta' : 'Mostrar dados da conta' }}">
      </i>
    </div>

    <img  *ngIf="contaSelecionada?.selfie" [src]="contaSelecionada?.selfie" alt="Selfie" 
      class="selfie-img img-thumbnail"
      width="100"/>


    <!-- Dados da conta aparecem ou somem -->
    <div *ngIf="mostrarDadosConta">
      <div class="mb-2"><strong>Número da Conta:</strong> {{ contaSelecionada?.numero }}</div>
      <div class="mb-2"><strong>Agência:</strong> {{ contaSelecionada?.agencia }}</div>
      <div class="mb-2"><strong>Titular:</strong> {{ contaSelecionada?.nome }}</div>
      <div class="mb-2"><strong>Tipo:</strong> {{ contaSelecionada?.tipo }}</div>
    </div>

    <hr>

    <!-- Linha do saldo com botão para mostrar/ocultar saldo -->
    <div class="d-flex align-items-center mb-2">
  <strong class="me-2">Saldo Atual:</strong>
  <span class="me-3">
    {{ mostrarSaldo ? (contaSelecionada?.saldo | currency:'BRL':'symbol':'1.2-2') : '••••••' }}
  </span>
  <button
    class="btn btn-sm btn-outline-secondary d-flex align-items-center"
    (click)="alternarSaldo()"
    title="{{ mostrarSaldo ? 'Ocultar saldo' : 'Mostrar saldo' }}"
  >
    <i class="bi me-1" [ngClass]="mostrarSaldo ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
  </button>
</div>


    <div class="mb-2"><strong>Data de Criação:</strong> 10/02/2021</div>
    <div class="mb-2"><strong>Status:</strong> <span class="text-success">Ativa</span></div>

   <div 
    >
      <span></span>
   </div>


<div class="mb-5 custom-check .form-check-input">
      <h5 class="d-flex align-items-center">
  Solicitar cartão
  <i 
     class="bi bi-journal-text ms-2 cartao-conteudo cartao"
    style="cursor: pointer; font-size: 1.3rem;" 
    title="Ver Extrato"
    (click)="onSolicitarCartao()"
  ></i>
</h5>

<!-- Conteúdo simples que aparece quando solicitarCartao for true -->
<div *ngIf="solicitarCartao">
 <!-- Campo: Tipo do Cartão -->
<div class="mb-3 form-check custom-check">
  <label for="tipoCartao" class="form-label">Tipo do Cartão</label>
  <select id="tipoCartao" class="form-select" [(ngModel)]="cartao.tipo" name="tipoCartao">
    <option value="" disabled selected>Selecione o tipo</option>
    <option value="CREDITO">Crédito</option>
    <option value="DEBITO">Débito</option>
    <option value="MULTIPLO">Múltiplo</option>
  </select>
</div>

<!-- Campo: Bandeira do Cartão -->
<div class="mb-3 form-check custom-check">
  <label for="bandeiraCartao" class="form-label">Bandeira do Cartão</label>
  <select id="bandeiraCartao" class="form-select" [(ngModel)]="cartao.bandeira" name="bandeiraCartao">
    <option value="" disabled selected>Selecione a bandeira</option>
    <option value="VISA">Visa</option>
    <option value="MASTERCARD">Mastercard</option>
    <option value="ELO">Elo</option>
  </select>
</div>
<div class="mb-3 form-check custom-check">
    <label class="form-label">Senha</label>
    <input type="password" class="form-control" [(ngModel)]="cartao.senha" name="senha" 
     #senha="ngModel" required  minlength="6"/>
</div>
 <button (click)="onCartao()">
  Solicitar 
 </button>
</div>
</div>


  <hr>
   <h5 class="d-flex align-items-center"> 
  Últimas Transações
  <i 
    class="bi bi-journal-text ms-2" 
    style="cursor: pointer; font-size: 1.3rem;" 
    title="Ver Extrato"
    (click)="onExtrato()"
  ></i>
</h5>

<table *ngIf="mostrarExtrato" class="table table-sm">
  <thead>
    <tr>
      <th>Data</th>
      <th>Descrição</th>
      <th>Valor</th>
      <th>Tipo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>15/07/2025</td>
      <td>Transferência recebida</td>
      <td class="text-success">+ R$ 500,00</td>
      <td>Crédito</td>
    </tr>
    <tr>
      <td>14/07/2025</td>
      <td>Pagamento de boleto</td>
      <td class="text-danger">- R$ 150,00</td>
      <td>Débito</td>
    </tr>
  </tbody>
</table>
  </div>
</div>
